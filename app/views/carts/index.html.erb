<head>
  <%= stylesheet_link_tag "cart.css" %>
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <aside class="col-lg-9">
        <div class="card">
          <div class="table-responsive">
            <table class="table table-borderless table-shopping-cart">
              <thead class="text-muted">
                <tr class="small text-uppercase">
                  <th scope="col">Product</th>
                  <th scope="col" width="120">Quantity</th>
                  <th scope="col" width="120">Price</th>
                  <th scope="col" width="120">Total</th>
                  <th scope="col" class="text-right d-none d-md-block" width="200"></th>
                </tr>
              </thead>
              <tbody class="align-middle">
                <%= render partial: "cart_item" , collection: @cart_items %>
              </tbody>
            </table>
          </div>
        </div>
      </aside>
      <aside class="col-lg-3">
        <div class="card mb-3">
          <div class="card-body">
            <%= form_with url: "/coupon", class: "mb-5", remote: true do |f| %>
              <div class="form-group"> <label>Have coupon?</label>
                <div class="input-group">
                  <%= f.text_field :coupon, class:"form-control p-2 coupon-field",placeholder: "Coupon Code" %>
                  <div class="input-group-append">
                    <%= f.submit value:"Apply", class:"btn btn-primary btn-apply coupon" %>
                  </div>
                </div>
              <%end%>
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              <dl class="dlist-align">
                <dt>Total price:</dt>
                <dd class="text-right ml-3">
                  <h6 class="font-weight-medium" id="cart-sub-total"><%=  @cart_sub_total %> <span>$</span></h6>
                </dd>
              </dl>
              <dl class="dlist-align">
                <%= render partial: "coupon", coupon: @coupon %>
              </dl>
              <dl class="dlist-align">
                <%= render partial: "cart_total", locals: {coupon: @coupon, cart_sub_total: @cart_sub_total}  %>
              </dl>
              <hr>
              <%= button_to "Proceed To Checkout", checkout_index_path, class:"btn btn-out btn-primary btn-square btn-main",  remote: true %>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </body>
